<!DOCTYPE html>
<html lang="en" ng-app="fiBenchmarkApp"><head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<meta name="description" content="">
	<meta name="author" content="JSI">
	<link rel="shortcut icon" href="../../img/favicon.ico" type="image/x-icon">
	<link rel="icon" href="../../img/favicon.ico" type="image/x-icon">

    <title>FI-Impact Report</title>
		
    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
	<!-- Optional includes -->
	<link href="../../css/nv.d3.min.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="../../css/agency.css" rel="stylesheet">
	<link href="../../css/fi-impact.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link rel="stylesheet" href="../../css/font-awesome.min.css">
    <link href="../../css/googlefonts.css" rel="stylesheet" type="text/css">

</head>

<body id="page-top" class="index" ng-controller="fiGraphs as vm" ng-cloak>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">FI-IMPACT Report</a> <a class="navbar-brand page-scroll" href="#page-top">FI-IMPACT Benchmarking</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden"><a href="#page-top"></a></li>
                    <li><a class="page-scroll summary" href="#project">Scatter</a></li>
                    <li><a class="page-scroll" href="#innovation">Clusters</a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <!-- Header -->
    <header><div class="container"><div class="intro-text">
		<!-- <div class="intro-lead-in">This is your <img src="../../img/logo.png"> <span ng-if="d.impact">Impact</span><span ng-if="d.self">Self</span> Assessment Report for project</div><div class="intro-heading">{{d.Q1_4}}</div> -->
	</div></div></header>

	<!-- Filters -->
    <section id="filters"><div class="container">
		<div class="row">
			<div class="col-md-6">
				<div class="form-group vspace">
					<label for="chooseSlice" class="col-sm-4 control-label text-right">Slice</label>
					<div class="col-sm-8">
						<select class="form-control"
							ng-model="vm.scatter.slice"
							ng-options="slice.abscissa.label + ' - ' + slice.ordinate.label for (index, slice) in vm.legend.slices track by index"
							ng-change="vm.plotChart()"></select>
					</div>
				</div>
				<div class="form-group vspace">
					<label for="chooseFilter" class="col-sm-4 control-label text-right">Filter</label>
					<div class="col-sm-8">
						<select class="form-control"
							ng-model="vm.filter"
							ng-options="selection.label for selection in vm.legend.selections track by selection.field"
							ng-change="vm.plotChart()"></select>
					</div>
				</div>
			</div>
			<div class="col-md-4 col-md-offset-2">
				<div class="checkbox" ng-repeat="(type, object) in vm.legend.type" ng-hide="type == 'SELECTED'">
					<label class="legend-checkboxes">
						<span class="symbol" ng-style="{'color': vm.getTypeColor(object)}" ng-bind-html="vm.symbolLegend[vm.symbols[object.index]].code"></span>
						<span class="legend-checkbox"><input type="checkbox" ng-model="object.checked" ng-change="vm.plotChart()"> {{type}}</span>
					</label>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-8">
				<uib-tabset active="active" justified="true">
					<uib-tab index="0" heading="Scatterplot" select="vm.showPlot('scatter')"></uib-tab>
					<uib-tab index="1" heading="Similarity graph" id="similarity" select="vm.showPlot('similarity')"></uib-tab>
				</uib-tabset>
				<div class="fi-plot" id="scatterplot"><svg viewBox="0 0 700 700" style="margin: 0px; padding: 0px; height: 95%; width: 95%"></svg></div>
				<div class="fi-plot" id="similarityplot" style="width:800px; height:600px;"></div>
			</div>
			<div class="col-md-4" >
				<ul class="legend-list" ng-if="vm.filter.displayType == 'list'">
					<li ng-repeat="(option, object) in vm.filter.dictionary"><i class="fa fa-square" aria-hidden="true" ng-style="{'color': vm.colors[object.index]}"></i> {{object.label}}</li>
				</ul>
				<ul class="legend-list-checkbox" ng-if="vm.filter.displayType == 'checkbox'">
					<li ng-repeat="(option, object) in vm.filter.dictionary">
						<div class="checkbox">
							<label><i class="fa fa-square" aria-hidden="true" ng-style="{'color': vm.getColor(object)}"></i> <span><input type="checkbox" ng-disabled="object.label == 'NA'" ng-model="object.checked" ng-change="vm.plotChart()"> {{object.label}}</span></label>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div></section>
	
    <!-- Partners -->
	<aside class="clients"><div class="container"><hr id="partners"><div class="row">
		<div class="col-md-2 col-sm-6"><a href="http://idcitalia.com/ita/" target="_blank"><img style="margin-left: 0px; margin-right: 10px;" src="../../css/IDC_logo_4.png" alt="" width="120" height="57" /></a></div>
		<div class="col-md-2 col-sm-6"><a href="http://www.idg.co.uk/" target="_blank"><img style="margin-left: 10px; margin-right: 10px;" src="../../css/IDG_Communications1_3.jpg" alt="" width="120" height="35" /></a></div>
		<div class="col-md-2 col-sm-6"><a href="http://www.bluegreenstrategy.com/" target="_blank"><img style="margin-left: 10px; margin-right: 10px;" src="../../css/logotipo_bluegreen_04_v02_small_3.png" alt="" width="150" height="34" /></a></div>
		<div class="col-md-2 col-sm-6"><a href="http://www.iimg.com" target="_blank"><img style="margin-left: 10px; margin-right: 10px;" src="../../css/iimc.gif" alt="" width="138" height="36" /></a></div>
		<div class="col-md-2 col-sm-6"><img style="margin-left: 10px; margin-right: 10px;" src="../../css/SFC_2.jpg" alt="" width="150" height="50" /></div>
		<div class="col-md-2 col-sm-6"><a href="http://ailab.ijs.si/" target="_blank"><img style="margin-left: 10px; margin-right: 0px;" src="../../css/jsi_logo_2.png" alt="" width="150" height="43" /></a></div>
	</div></div></aside>
    <footer><div class="container"><div class="row"><div class="col-md-12">
		<span class="copyright">Copyright &copy; FI-Impact 2015</span>
	</div></div></div></footer>

	<!-- START SIGMA IMPORTS -->
	<script src="../../sigmajs/src/sigma.core.js"></script>
	<script src="../../sigmajs/src/conrad.js"></script>
	<script src="../../sigmajs/src/utils/sigma.utils.js"></script>
	<script src="../../sigmajs/src/utils/sigma.polyfills.js"></script>
	<script src="../../sigmajs/src/sigma.settings.js"></script>
	<script src="../../sigmajs/src/classes/sigma.classes.dispatcher.js"></script>
	<script src="../../sigmajs/src/classes/sigma.classes.configurable.js"></script>
	<script src="../../sigmajs/src/classes/sigma.classes.graph.js"></script>
	<script src="../../sigmajs/src/classes/sigma.classes.camera.js"></script>
	<script src="../../sigmajs/src/classes/sigma.classes.quad.js"></script>
	<script src="../../sigmajs/src/classes/sigma.classes.edgequad.js"></script>
	<script src="../../sigmajs/src/captors/sigma.captors.mouse.js"></script>
	<script src="../../sigmajs/src/captors/sigma.captors.touch.js"></script>
	<script src="../../sigmajs/src/renderers/sigma.renderers.canvas.js"></script>
	<script src="../../sigmajs/src/renderers/sigma.renderers.webgl.js"></script>
	<script src="../../sigmajs/src/renderers/sigma.renderers.svg.js"></script>
	<script src="../../sigmajs/src/renderers/sigma.renderers.def.js"></script>
	<script src="../../sigmajs/src/renderers/webgl/sigma.webgl.nodes.def.js"></script>
	<script src="../../sigmajs/src/renderers/webgl/sigma.webgl.nodes.fast.js"></script>
	<script src="../../sigmajs/src/renderers/webgl/sigma.webgl.edges.def.js"></script>
	<script src="../../sigmajs/src/renderers/webgl/sigma.webgl.edges.fast.js"></script>
	<script src="../../sigmajs/src/renderers/webgl/sigma.webgl.edges.arrow.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.labels.def.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.hovers.def.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.nodes.def.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edges.def.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edges.curve.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edges.arrow.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edges.curvedArrow.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.def.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.curve.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.arrow.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.edgehovers.curvedArrow.js"></script>
	<script src="../../sigmajs/src/renderers/canvas/sigma.canvas.extremities.def.js"></script>
	<script src="../../sigmajs/src/renderers/svg/sigma.svg.utils.js"></script>
	<script src="../../sigmajs/src/renderers/svg/sigma.svg.nodes.def.js"></script>
	<script src="../../sigmajs/src/renderers/svg/sigma.svg.edges.def.js"></script>
	<script src="../../sigmajs/src/renderers/svg/sigma.svg.edges.curve.js"></script>
	<script src="../../sigmajs/src/renderers/svg/sigma.svg.labels.def.js"></script>
	<script src="../../sigmajs/src/renderers/svg/sigma.svg.hovers.def.js"></script>
	<script src="../../sigmajs/src/middlewares/sigma.middlewares.rescale.js"></script>
	<script src="../../sigmajs/src/middlewares/sigma.middlewares.copy.js"></script>
	<script src="../../sigmajs/src/misc/sigma.misc.animation.js"></script>
	<script src="../../sigmajs/src/misc/sigma.misc.bindEvents.js"></script>
	<script src="../../sigmajs/src/misc/sigma.misc.bindDOMEvents.js"></script>
	<script src="../../sigmajs/src/misc/sigma.misc.drawHovers.js"></script>
	<!-- END SIGMA IMPORTS -->
	<script src="../../sigmajs/plugins/sigma.renderers.customShapes/shape-library.js"></script>
	<script src="../../sigmajs/plugins/sigma.renderers.customShapes/sigma.renderers.customShapes.js"></script>
	<script src="../../sigmajs/plugins/sigma.layout.forceAtlas2/worker.js"></script>
	<script src="../../sigmajs/plugins/sigma.layout.forceAtlas2/supervisor.js"></script>

	<!-- Core JavaScript -->
    <script src="../../js/jquery.min.js"></script>
	<script src="../../js/angular.min.js"></script>
	<script src="../../js/angular-sanitize.min.js"></script>
	<script src="../../js/ui-bootstrap-tpls-1.3.3.min.js" type="text/javascript"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../js/ie10-viewport-bug-workaround.js"></script>
    <!-- Plugin JavaScript -->
    <script src="../../js/jquery.easing.min.js"></script>
    <script src="../../js/classie.js"></script>
    <script src="../../js/cbpAnimatedHeader.min.js"></script>
	<!-- Optional includes -->
	<script type="text/javascript" src="../../js/d3.min.js"></script>
	<script type="text/javascript" src="../../js/nv.d3.min.js"></script>
	<!-- FI-Impact JavaScript -->
	<script type="text/javascript" src="../../js/fiBenchmarking.js"></script>
	
	<script>

	 $.getJSON( "../../service?id=efd387a5-ae68-4c7d-9ee5-6f1136084f98&action=q-get-graph", function( data ) {
			console.log(data);
			var dict = {};
			var uniqEdges = [];
			for (var i=0; i<data.edges.length; i++) {
				if (!dict.hasOwnProperty(data.edges[i].id)) {
					dict[data.edges[i].id] = 1;
					uniqEdges.push(data.edges[i]);
				}
			}
			for (var i=0; i<data.nodes.length; i++) {
				if (data.nodes[i].node_type == "HPI") {
					data.nodes[i].type = "equilateral"; //square, equilateral, star, square, diamond
				}
				else if (data.nodes[i].node_type == "normal") {
					data.nodes[i].type = "square";
				}
				else if (data.nodes[i].node_type == "normal") {
					data.nodes[i].type = "cross";
				}
				else {
					data.nodes[i].type = "circle";
				}
				data.nodes[i].color = "#123456";
				data.nodes[i].borderColor = "red";
				data.nodes[i].label = data.nodes[i].extra_data.Q1_1;
				data.nodes[i].size = data.nodes[i].deg;
			}
			sigma.utils.pkg('sigma.canvas.nodes');
		

		s = new sigma({
			graph: {nodes: data.nodes, edges: uniqEdges},
			renderer: {
			// IMPORTANT:
			// This works only with the canvas renderer, so the
			// renderer type set as "canvas" is necessary here.
			container: document.getElementById('similarityplot'),
			type: 'canvas'
			},
			settings: {
				minNodeSize: 4,
				maxNodeSize: 16,
				labelThreshold: 12 
			}
	});

	CustomShapes.init(s);
	s.startForceAtlas2({worker: true, barnesHutOptimize: false, gravity: 5, strongGravityMode: false});
	setTimeout(function(){ s.stopForceAtlas2(); }, 3000);    
	});

	</script>

</body>

</html>
